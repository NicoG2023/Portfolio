@import "@fontsource/inter/400.css";
@import "@fontsource/inter/500.css";
@import "@fontsource/inter/600.css";
@import "@fontsource/jetbrains-mono/400.css";
@import "@fontsource/jetbrains-mono/500.css";

@import "tailwindcss";
@import "./styles/theme.css";

html,
body,
#root {
  height: 100%;
}

/* =========================
   BODY BASE
   ========================= */

body {
  color: rgb(var(--text));
  background-color: rgb(var(--bg));
  position: relative;

  /* Base limpia (paper + dust) */
  background-image:
    /* gold dust */
    radial-gradient(rgb(var(--accent) / 0.12) 1px, transparent 1px),
    radial-gradient(rgb(var(--accent) / 0.08) 0.9px, transparent 0.9px),
    radial-gradient(rgb(var(--accent) / 0.06) 1.6px, transparent 1.6px),

    /* vignette MUY suave (no crea línea) */
    radial-gradient(circle at 50% 45%, transparent 60%, rgb(var(--ink) / 0.045) 100%),

    /* paper wash */
    linear-gradient(180deg, rgb(var(--paper-warm) / 0.22), transparent 55%);

  background-size: 26px 26px, 44px 44px, 120px 120px, 100% 100%, 100% 100%;
  background-position: 0 0, 12px 16px, 20px 40px, 0 0, 0 0;
}

/* =========================
   LIGHT MODE AURORA (FIXED)
   ========================= */

body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;

  background:
    /* Fade vertical global (elimina la línea) */
    linear-gradient(
      to bottom,
      transparent 0%,
      rgb(var(--bg) / 0.15) 35%,
      rgb(var(--bg) / 0.28) 65%,
      transparent 100%
    ),

    /* Mancha 1: crimson → oro */
    radial-gradient(900px 520px at 18% 12%,
      rgb(var(--crimson) / 0.14) 0%,
      rgb(var(--accent) / 0.10) 38%,
      transparent 70%
    ),

    /* Mancha 2: oro superior */
    radial-gradient(820px 520px at 54% 0%,
      rgb(var(--accent) / 0.14) 0%,
      transparent 66%
    ),

    /* Mancha 3: crimson lateral */
    radial-gradient(760px 520px at 88% 36%,
      rgb(var(--crimson) / 0.12) 0%,
      transparent 68%
    ),

    /* Mancha 4: oro → crimson inferior */
    radial-gradient(900px 600px at 22% 92%,
      rgb(var(--accent) / 0.10) 0%,
      rgb(var(--crimson) / 0.09) 42%,
      transparent 74%
    ),

    /* Mancha 5: oro inferior derecho */
    radial-gradient(900px 600px at 84% 96%,
      rgb(var(--accent) / 0.08) 0%,
      transparent 72%
    );

  mix-blend-mode: multiply;
  opacity: 0.85;
  filter: blur(14px);
}

/* =========================
   DARK MODE (NO AURORA)
   ========================= */

html.dark body::after,
body.dark::after {
  content: none;
}

/* =========================
   DARK MODE BASE
   ========================= */

html.dark body,
body.dark {
  background-color: rgb(var(--bg));
  background-image:
    radial-gradient(rgb(var(--accent) / 0.085) 0.9px, transparent 0.9px),
    radial-gradient(rgb(var(--accent) / 0.055) 0.8px, transparent 0.8px),
    radial-gradient(rgb(var(--accent) / 0.05) 1.4px, transparent 1.4px),

    /* spotlight superior */
    radial-gradient(circle at 50% -12%, rgb(var(--accent) / 0.22), transparent 54%),

    /* crimson sutil */
    radial-gradient(circle at 12% 26%, rgb(var(--crimson) / 0.10), transparent 62%),

    /* viñeta cinematográfica */
    radial-gradient(circle at 50% 45%, transparent 45%, rgb(0 0 0 / 0.55) 100%),

    /* profundidad */
    linear-gradient(180deg, rgb(0 0 0 / 0.25), transparent 55%);

  background-size:
    26px 26px,
    44px 44px,
    110px 110px,
    100% 100%,
    100% 100%,
    100% 100%,
    100% 100%;

  background-position:
    0 0,
    12px 16px,
    20px 40px,
    0 0,
    0 0,
    0 0,
    0 0;
}

/* =========================
   GRAIN / FILM OVERLAY
   ========================= */

@keyframes grainShift {
  0%, 100% { transform: translate3d(0, 0, 0); }
  50% { transform: translate3d(-1.5%, 1.5%, 0); }
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;

  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");

  opacity: 0.12;
  mix-blend-mode: multiply;

  /* ✅ animación sutil */
  animation: grainShift 18s steps(2) infinite;
  will-change: transform;
}

/* Dark grain tuning */
html.dark body::before,
body.dark::before {
  opacity: 0.14;
  mix-blend-mode: screen;
}

/* =========================
   ACCESSIBILITY
   ========================= */

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  /* ✅ apagar grain motion */
  body::before {
    animation: none !important;
  }
}

/* =========================
   PREMIUM BACKGROUND MOTION
   ========================= */

@keyframes blobFloatY {
  0%, 100% { transform: translate3d(-50%, 0, 0) scale(1); }
  50% { transform: translate3d(-50%, -18px, 0) scale(1.03); }
}

/* Variante sin -50% (para blobs que no usan -translate-x-1/2) */
@keyframes blobFloatYPlain {
  0%, 100% { transform: translate3d(0, 0, 0) scale(1); }
  50% { transform: translate3d(0, -16px, 0) scale(1.025); }
}

@keyframes blobDriftXPlain {
  0%, 100% { transform: translate3d(0, 0, 0); }
  50% { transform: translate3d(16px, 0, 0); }
}

/* Clases utilitarias */
.bg-blob-float-center {
  animation: blobFloatY 52s ease-in-out infinite;
  will-change: transform;
}

.bg-blob-float {
  animation: blobFloatYPlain 58s ease-in-out infinite;
  will-change: transform;
}

.bg-blob-drift {
  animation: blobDriftXPlain 72s ease-in-out infinite;
  will-change: transform;
}

/* delays negativos para que no se sincronicen */
.bg-delay-1 { animation-delay: -9s; }
.bg-delay-2 { animation-delay: -18s; }
.bg-delay-3 { animation-delay: -27s; }

/* Respeta accesibilidad */
@media (prefers-reduced-motion: reduce) {
  .bg-blob-float-center,
  .bg-blob-float,
  .bg-blob-drift {
    animation: none !important;
  }
}
